# Entity 实体文档

本文档描述了系统中所有数据库实体的字段定义、作用以及实体之间的关系。

## EntityBase - 实体基类

所有实体的基类，提供通用的基础字段。

| 字段名 | 类型 | 描述 |
|--------|------|------|
| id | string | 主键，采用雪花ID算法生成的唯一标识符 |
| createdAt | Date | 记录创建时间，默认为当前时间 |
| updatedAt | Date | 记录最后更新时间，每次更新时自动刷新为当前时间 |

## User - 用户实体

用户实体存储平台用户的基本信息。

**表名**: `users`

| 字段名 | 类型 | 长度 | 可空 | 描述 |
|--------|------|------|------|------|
| id | string | - | 否 | 主键，继承自EntityBase |
| name | string | 10 | 否 | 用户昵称，最大长度10个字符 |
| email | string | 32 | 否 | 邮件地址，最大长度32个字符，必须唯一 |
| password | string | 255 | 否 | 密码，最大长度255个字符，存储加密后的密码 |
| status | number | - | 否 | 用户状态：0（用户正常），1（未校验邮箱），2（账号被封禁），默认为0 |
| lastLoginAt | Date | - | 是 | 最后登录时间，记录用户最后一次登录的时间 |
| createdAt | Date | - | 否 | 创建时间，继承自EntityBase |
| updatedAt | Date | - | 否 | 更新时间，继承自EntityBase |

### 用户状态说明

- **0**: 用户正常状态，可以正常使用平台功能
- **1**: 未校验邮箱状态，需要完成邮箱验证
- **2**: 账号被封禁状态，无法登录和使用平台功能

## Book - 图书实体

图书实体存储用户添加的图书信息。

**表名**: `books`

| 字段名 | 类型 | 长度 | 可空 | 描述 |
|--------|------|------|------|------|
| id | string | - | 否 | 主键，继承自EntityBase |
| title | string | 200 | 否 | 图书名称，最大长度200个字符 |
| author | string | 100 | 否 | 作者姓名，最大长度100个字符 |
| publisher | string | 100 | 否 | 出版社名称，最大长度100个字符 |
| isbn | string | 20 | 否 | ISBN编号，最大长度20个字符，必须唯一 |
| description | string | 500 | 是 | 图书描述，最大长度500个字符 |
| publishDate | Date | - | 是 | 出版日期，记录图书的出版时间 |
| pages | number | - | 是 | 页数，记录图书的总页数 |
| user | User | - | 否 | 所属用户，关联到User实体的外键 |
| status | number | - | 否 | 图书状态：0（正常），1（已删除），默认为0 |
| createdAt | Date | - | 否 | 创建时间，继承自EntityBase |
| updatedAt | Date | - | 否 | 更新时间，继承自EntityBase |

### 图书状态说明

- **0**: 正常状态，图书信息有效且可查看
- **1**: 已删除状态，图书被用户删除（逻辑删除）

### 关系说明

**User 与 Book 的关系**：

- **关系类型**: 一对多 (One-to-Many)
- **描述**: 一个用户可以拥有多本图书，每本图书只能属于一个用户
- **外键**: Book表中的`user`字段关联到User表的`id`字段
- **约束**: 非空约束，每本图书都必须有对应的所属用户
